<!doctype html>
<link rel="stylesheet" type="text/css" href="/styles.css">
<script type="text/javascript" src="/scripts.js"></script>
<html>
  <head>
    <link rel="stylesheet" href="styles.css">
    <title>MFPG Webpage</title>
  </head>
  <body>
    <div class="topbar">
      <div class="menu">
        <button style="width: 100%;" class="btn">
          <a href="/">Home</a>
        </button>
      </div>
      <div class="menu">
        <button style="width: 75%;" class="btn-selected">
          <a href="/guides/">Guides</a>
        </button>
        <button onclick="dropGuidesMenu()" class="dropbtn">
          &#11183
        </button>
        <div id="guides" div class="dropdown-menu">
          <div class="dropdown-content">
            <div class="dropdown-text">
              Interfaces
            </div> 
            <a href="guiguide">GUI</a>
            <a href="cliguide">CLI</a>
          </div>
          <div class="dropdown-content">
            <div class="dropdown-text">
              Tools
            </div> 
            <a href="dslguide">DSL</a>
            <a href="notemapbuilder">Notemap Builder</a>
          </div>
          <div class="dropdown-content">
            <div class="dropdown-text">
              Tutorials
            </div> 
            <a href="example-easy">Simple Example</a>
          </div>
        </div>
      </div>

      <div class="menu">
        <button style="width: 75%;" class="btn">
          <a href="/links/">Links</a>
        </button>
        <button onclick="dropLinksMenu()" class="dropbtn">
          &#11183
        </button>
        <div id="links" div class="dropdown-menu">
          <div class="dropdown-content">
            <div class="dropdown-text">
              Links
            </div>
            <a href="https://github.com/rasmusthorsson/mfpg">GitHub Repo</a>
          </div>
        </div>
      </div>
      
      <div class="menu">
        <button style="width: 75%;" class="btn">
          <a href="/info/">Info</a> 
        </button>
        <button onclick="dropInfoMenu()" class="dropbtn">
          &#11183
        </button>
        <div id="info" div class="dropdown-menu">
          <div class="dropdown-content">
            <div class="dropdown-text">
              Information
            </div>
            <a href="/info/patch-notes/">Patch Notes</a>
            <a href="/info/faq">Frequently Asked Questions</a>
          </div>
        </div>
      </div>

    </div>

    <div class="quickbar">
      <div class="quickbar-text">
        Guides
      </div>
        <a href="guiguide">GUI</a>
        <a href="cliguide">CLI</a>
        <a href="dslguide">DSL</a>
        <a href="notemapbuilder" style="color:#a111f1;">Notemap Builder</a>
        <a href="example-easy">Simple Example</a>
    </div>
    <div class="guidepage-index">
      <a href="#Attributes">Attributes</a>
      <a href="#Existing" class="inner">Existing Attributes</a>
      <a href="#Defining" class="inner">Defining Attributes</a>
      <a href="#Developing" class="inner">Developing Attributes</a>
      <a href="#Implementing" class="inner">Implementing Attributes</a>
      <a href="#Usage">Usage</a>
    </div>
    <div class="guidepage">
      <div class="pagetitle">
        A Guide to using the MFPG Notemap CSV Generator
      </div>
      <div class="guidepage-text">
        <h1>CSV Note Mapper File Generator</h1>
        <p>In order to use physical attributes in action set definitions via the <b>DSL</b> (or even with a preset) these 
        attributes must be mapped to notes. This guide gives a brief overview on how generate
        CSV files with mappings from physical attributes to notes such that they can be used
        in the DSL.</p>
        <p><strong>This is an advanced section and requires some knowledge of programming</strong></p>
        <a class="anchor" id="Attributes"></a>
        <h1>Attributes</h1>
        <p>A <strong>Phyiscal Attribute</strong> is some physical aspect of a way to play a note. For 
        example, every note is played on a string, so we could define
        <strong>STRING</strong> as an attribute. Therefore if
        a note is played on the D-String on a violin, you would have an attribute value for 
        that way of playing that note as: "<em>This note can be played on String 2</em>". 
        This allows us to define multiple ways of playing the same note by differentiating the 
        way that note is played. This also allows us to reason about transitions between 
        ways of playing notes in a more concrete manner and assign <em>costs</em> to these 
        transitions. </p> <p>To <strong>map</strong> a list of attributes to a note means to specify that 
        <em>Note x can be played
        with attribute values: a, b, c ...</em>. These mappings are then used when the program
        is calculating the most effective way to play a piece of music.</p>
        <a class="anchor" id="Existing"></a>
        <h2>Existing Attributes</h2>
        <p>Currently a few different attributes have been mapped for the violin in the default
        CSV file available:</p>
        <ul>
        <li>String: The string being played, 1-4.</li>
        <li>Finger: The finger used to play the note, 0-4.</li>
        <li>Hand Position: The position of the hand when playing the note: 1-12.</li>
        </ul>
        <p>These attributes are mapped in the CSV format:</p>
        <p><code>Note,STRING,FINGER,HAND_POS</code></p>
        <p>With the following rows as the mapped values, e.g:</p>
        <p><code>G_4,1,3,4</code></p>
        <p>The attribute names in the CSV file must be exactly the same as the attribute names 
        defined in the DSL when defining an action set, and they are case sensitive.
        Each Note is generally not exclusive in the mapping, for example in the same file
        you would have the CSV values:</p>
        <p><code>G_4,1,4,3</code></p>
        <p>As they are both valid ways of playing the G 4 note on the violin.</p>
        <a class="anchor" id="Defining"></a>
        <h2>Defining Attributes</h2>
        <p>Attributes should often be 
        defined in relation to other attributes. For example, in the previous section the
        two examples of the <b>G 4</b> mappings are not random, the increase in the value of the
        <strong>FINGER</strong> attribute from 3 to 4 is synchronized with the decrease in the value of the
        <strong>HAND_POS</strong> attribute from 4 to 3. This is due to the relation between the two 
        attributes: in reality, the <b>G 4</b> note when played on the same string will be played
        in the same location on that string, but the hand can move depending on which position
        is more beneficial in regards to previous or subsequent notes. Therefore we consider
        every possible hand position for that note on that string, and subsequently the finger
        used changes in sync with the hand position changes to allow for that.</p>
        <p>One could imagine an attribute which represents the distance between
        the note played and the bridge. This attribute could be useful for certain purposes, 
        even though it does not capture the important aspect of the hand position or which 
        finger is used and thus cannot substitute these two attributes. Therefore to add this 
        attribute we would need to add it as a standalone column in the CSV file.</p>
        <p><code>Note,STRING,FINGER,HAND_POS,DISTANCE(mm)</code><br><code>G_4,1,4,3,160</code><br><code>G_4,1,3,4,160</code></p>
        <p>We can here see that the new distance attribute does not seem to have any direct 
        relation to the hand position or the finger attributes respectively, but could 
        possibly relate to their combined values. For example, if you consider the same 
        finger and hand position values but for string 4, you would have the same distance 
        value.</p>
        <a class="anchor" id="Developing"></a>
        <h2>Developing new Attribute definitions</h2>
        <p>For any new attributes to be defined first we should establish the relationship with
        other attributes, as done above. Once the relationship is established (assuming there 
        is one), all possible values of the attribute must be calculated. This can be done
        either by defining them individually (as a list of possible values) or done indirectly
        by defining some function to caluclate the values possibly as a result of the 
        relationships to other attributes (which is why it can be more effective to establish 
        the relationships if there are any, you could just define the values manually but 
        that can take some time to do.).</p>
        <p>In this case you could look at sample values of distances between full steps of notes
        on the same string and define how the distance decreases as you get
        closer to the bridge as a function of the note location on the string (i.e, the finger the hand position attribute values).</p>
        <a class="anchor" id="Implementing"></a>
        <h2>Implementing new Attribute definitions</h2>
        <p>The next step is to write
        a program to generate CSV files where this attribute is present. In the GitHub repo
        for this project there is a skeleton program which generates CSV files, found in 
        <strong>resources/csv_note_map_builder/</strong>. The <strong>Builder.cpp</strong> file contains two functions
        named <em>build_file()</em> and <em>build_file_CUSTOM()</em>, <em>build_file()</em> has a basic 
        implementation for generating <strong>STRING</strong>, <strong>FINGER</strong>, and <strong>HAND_POS</strong> attribute 
        values for all playable notes on a violin.</p>
        <p>To create your own implementation you can copy over the code from 
        <em>build_file()</em> to <em>build_file_CUSTOM()</em> (alternatively build your custom function
        from scratch) and then add the code for generating the new attribute there. To
        activate the custom function you also need to go into the <strong>Builder.h</strong> file in the
        same directory and uncomment the line <em>#define CUSTOM</em>, which will enable the custom
        function instead of the default one. The default function contains some documentation
        in the form of comments on what the different lines are meant to accomplish, which
        might help with the implementation of a new attribute addition. </p>
        <a class="anchor" id="Usage"></a>
        <h2>Usage</h2>
        <p><strong>Only tested on Linux</strong></p>
        <p>Once the attribute addition is implemented you need to compile the code (only the 
        files in <strong>resources/csv_note_map_builder/</strong> need to be compiled.). This can be done
        by running <strong>make</strong> in the earlier mentioned directory. If you do not want/can not use 
        <strong>make</strong> 
        you will need to manually compile the files using a C++ compiler of your choice.</p><p> With
        the program compiled you can then execute the program with a file name as an
        argument to direct the output. The output CSV file (if built correctly) can then
        be used as input to the CLI or the GUI main program using the CSV Notemapper. With
        this you can now use the attributes you added when writing the DSL file.</p>
      </div>
    </div>
  </body>
</html>
